<div class="requests-table-container1">
  <div class="wallet-section">
    <h2 class="wallet-heading">Wallet</h2>
    <div class="wallet-card">
      <div class="balance-info">
        <span class="balance-label">Your Balance</span>
        <span class="balance-amount">₹ {{ walletBalance | number:'1.2-2' }}</span>
      </div>
      <button class="add-balance-button" (click)="openModal()">+ Add Balance</button>
    </div>
  </div>
</div>

<div class="requests-table-container mt-3">
  <div class="table-header">
    <h2>Requests Table</h2>
    <button class="export-button">Export</button>
  </div>

  <!-- <div class="filter-section">
    <div class="filter-group">
      <label for="transactionRefId">Transaction Ref No</label>
      <div class="input-container">
        <input type="text" id="transactionRefId" placeholder="Enter a Topup Id" />
        <span class="search-icon">&#x1F50D;</span>
      </div>
    </div>

    <div class="filter-group">
      <label for="status">Status</label>
      <div class="input-container">
        <select id="status">
          <option value="All">All</option>
        </select>
      </div>
    </div>

    <div class="filter-group">
      <label for="dateRange">Date Range</label>
      <div class="input-container">
        <input type="text" id="dateRange" placeholder="dd-mm-yyyy" />
        <span class="calendar-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-calendar" viewBox="0 0 16 16">
            <path
              d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"
            />
          </svg>
        </span>
      </div>
    </div>
  </div> -->

  <div class="table-scroll-container">
    <table class="requests-table">
      <thead>
        <tr>
          <th>TRANSACTION DATE</th>
          <th>TRANSACTION REF NO</th>
          <th>PAYMENT MODE</th>
          <th>AMOUNT</th>
          <th>STATUS</th>
          <th>ATTACHMENT</th>
          <th>SUBMIT DATE</th>
          <th>UPDATE DATE</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let tx of transactions">
          <td>
            <span class="date-text">{{ tx.transaction_date | date: 'MM-dd-yyyy' }}</span><br />
            <!-- <span class="time-text">{{ tx.transaction_date | date: 'HH:mm:ss' }}</span> -->
          </td>
          <td>{{ tx.transactionrefno }}</td>
          <td>{{ tx.payment_mode }}</td>
          <td>₹ {{ tx.amount | number: '1.2-2' }}</td>
          <td><span class="status-badge" [ngClass]="tx.status.toLowerCase()">{{ tx.status }}</span></td>
          <td>{{ tx.attachment || '--' }}</td>
          <td>
            <span class="date-text">{{ tx.created_at | date: 'MM-dd-yyyy' }}</span><br />
            <span class="time-text">{{ tx.created_at | date: 'HH:mm:ss' }}</span>
          </td>
          <td>
            <span class="date-text">{{ tx.update_date | date: 'MM-dd-yyyy' }}</span><br />
            <span class="time-text">{{ tx.update_date | date: 'HH:mm:ss' }}</span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- Modal -->
<div class="modal-overlay" [class.hidden]="!isModalVisible">
  <div class="modal1">
    <div class="modal-header">
      <h3 class="modal-title">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor">
          <path
            d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"
          />
        </svg>
        Payment Details
      </h3>
      <button class="modal-close" (click)="closeModal()">&times;</button>
    </div>
    <div class="modal-body">
      <p class="modal-subtitle">Kindly enter the details of your payment.</p>

      <form
        [formGroup]="walletForm"
        (ngSubmit)="submitTopup()"
        class="payment-form"
        enctype="multipart/form-data"
      >
        <div class="form-row">
          <div class="form-group">
            <label for="paymentMode">Payment Mode *</label>
            <select id="paymentMode" formControlName="paymentMode" class="form-input">
              <option [ngValue]="null" disabled selected>-- SELECT PAYMENT MODE --</option>
              <option *ngFor="let mode of paymentModes" [value]="mode">{{ mode }}</option>
            </select>
          </div>
          <div class="form-group">
            <label for="paymentProofFile">Payment Proof File *</label>
            <input
              type="file"
              id="paymentProofFile"
              (change)="onFileChange($event)"
              class="form-control"
            />
          </div>


        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="transactionDate">Transaction Date *</label>
            <input
              id="transactionDate"
              type="date"
              formControlName="transactionDate"
              class="form-input"
            />
          </div>
          <div class="form-group">
            <label for="updateDate">Update Date *</label>
            <input
              id="updateDate"
              type="date"
              formControlName="updateDate"
              class="form-input"
            />
          </div>
        </div>

        <div class="form-row full-width">
          <div class="form-group">
            <label for="transactionRefNo">Transaction Reference No. *</label>
            <input
              id="transactionRefNo"
              type="text"
              formControlName="transactionRefNo"
              class="form-input"
              placeholder="Enter Transaction Reference No."
            />
          </div>
        </div>

        <div class="form-row full-width">
          <div class="form-group">
            <label for="amount">Amount ( in ₹ ) *</label>
            <input
              id="amount"
              type="text"
              formControlName="amount"
              class="form-input"
              placeholder="Enter Transaction Amount"
            />
          </div>
        </div>

        <button type="submit" class="submit-button" [disabled]="walletForm.invalid">
          Add Balance
        </button>
      </form>

      
    </div>
  </div>
</div>
