<h3 class="heading">Raise Invoice </h3>
<div class="row g-4 bg-light">


 
  <div class="col-lg-12">
    <div class="card shadow-sm rounded-3 border-0 overflow-hidden">
      <div class="table-responsive">
        <table class="table table-hover align-middle mb-0" style="font-size: 0.9rem;">
          <thead class="table-light">
            <tr>
              <!-- <th class="p-3 text-start text-uppercase small fw-semibold text-muted text-nowrap">Dealer</th> -->
              <!-- <th class="p-3 text-start text-uppercase small fw-semibold text-muted text-nowrap">Status</th> -->
              <th class="p-3 text-start text-uppercase small fw-semibold text-muted text-nowrap">Month/Year</th>
              <th class="p-3 text-start text-uppercase small fw-semibold text-muted text-nowrap">Invoice Number</th>
              <!-- <th class="p-3 text-start text-uppercase small fw-semibold text-muted text-nowrap">Payout</th> -->
              <!-- <th class="p-3 text-start text-uppercase small fw-semibold text-muted text-nowrap">NetBusiness</th> -->
              <!-- <th class="p-3 text-start text-uppercase small fw-semibold text-muted text-nowrap">IGST</th> -->
              <th class="p-3 text-start text-uppercase small fw-semibold text-muted text-nowrap">NetPayout</th>
              <th class="p-3 text-start text-uppercase small fw-semibold text-muted text-nowrap">ClaimedPayout</th>
              <th class="p-3 text-start text-uppercase small fw-semibold text-muted text-nowrap">UnClaimedPayout</th>
              <!-- <th class="p-3 text-start text-uppercase small fw-semibold text-muted text-nowrap">Admin Date</th>
              <th class="p-3 text-start text-uppercase small fw-semibold text-muted text-nowrap">Dealer Date</th> -->
              <th class="p-3 text-start text-uppercase small fw-semibold text-muted text-nowrap">Raise Invoice</th>
            </tr>
          </thead>
          <tbody>
            @for (invoice of allInvoices(); track invoice.invoiceid) {
              <tr class="border-top">
                <!-- <td class="p-3 text-nowrap fw-medium">{{ invoice.dealername }}</td> -->
                <!-- <td class="p-3 text-nowrap">
                     <span class="badge rounded-pill px-3 py-2 small fw-medium" [ngClass]="{
                    'text-bg-warning-subtle border border-warning-subtle': invoice.status === 'Sent to Dealer',
                    'text-bg-success-subtle border border-success-subtle': invoice.status === 'Submitted by Dealer'
                  }">
                    {{ invoice.status }}
               </span>
          </td> -->
          <td class="p-3 text-nowrap">{{ invoice.invoicemonthyear }}</td>
          <td class="p-3 text-nowrap">{{ invoice.invoicenumber }}</td>
                    <!-- <td class="p-3 text-nowrap">{{ invoice.payout }}</td> -->
                    <!-- <td class="p-3 text-nowrap">{{ invoice.netbusiness }}</td> -->
                    <!-- <td class="p-3 text-nowrap">{{ invoice.igst }}</td> -->
                    <td class="p-3 text-nowrap">{{ invoice.netPayout }}</td>
                    <td class="p-3 text-nowrap">{{ invoice.claimedPayout }}</td>
                    <td class="p-3 text-nowrap">{{ invoice.unClaimedPayout }}</td>
                
                <!-- <td class="p-3 text-nowrap">{{ formatDate(invoice.adminsubmissiondate) }}</td>
                <td class="p-3 text-nowrap">{{ formatDate(invoice.dealersubmissiondate) }}</td> -->
                    <td class="p-3 text-nowrap">
                    <button class="btn btn-sm btn-primary" >RaiseInvoice</button>
                    </td>
              </tr>
            } 
            @empty {
                      <tr style="height: 100px;">
                        <td colspan="9" class="text-center">
                          @if (allInvoices().length === 0 && !this.loading()) {
                            <span>No invoices found.</span>
                          } @else {
                            <div class="spinner-border text-primary" role="status">
                              <span class="visually-hidden">Loading...</span>
                            </div>
                          }
                        </td>
                      </tr>
                    }
            <!-- @empty {
              <tr>
                <td [attr.colspan]="6" class="text-center p-5 text-muted">
                  No invoices found.
                </td>
              </tr>
            } -->
          </tbody>
        </table>
      </div>

      <div class="card-footer bg-white d-flex flex-wrap align-items-center p-3">
        <div class="text-muted small mb-2 mb-md-0">
          {{ paginationInfo() }}
        </div>
        <div class="flex-grow-1"></div>
        <div class="d-flex align-items-center gap-2 mb-2 mb-md-0 me-4">
          <label for="pageSize" class="form-label small text-nowrap mb-0">Rows:</label>
          <select id="pageSize" [value]="pageSize()" (change)="onPageSizeChange($event)" class="form-select form-select-sm" style="width: 75px;">
            <option value="5">5</option>
            <option value="10">10</option>
            <option value="25">25</option>
            <option value="50">50</option>
          </select>
        </div>

        <nav aria-label="Policy pagination">
          <ul class="pagination pagination-sm mb-0">
            <li class="page-item" [class.disabled]="currentPage() === 1">
              <button class="page-link" (click)="goToPage(1)" aria-label="First">&laquo;</button>
            </li>
            <li class="page-item" [class.disabled]="currentPage() === 1">
              <button class="page-link" (click)="prevPage()" aria-label="Previous">&lsaquo;</button>
            </li>
            <li class="page-item" [class.disabled]="currentPage() === totalPages()">
              <button class="page-link" (click)="nextPage()" aria-label="Next">&rsaquo;</button>
            </li>
            <li class="page-item" [class.disabled]="currentPage() === totalPages()">
              <button class="page-link" (click)="goToPage(totalPages())" aria-label="Last">&raquo;</button>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </div>
</div>