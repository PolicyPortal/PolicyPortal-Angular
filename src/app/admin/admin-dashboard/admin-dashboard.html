<!-- Main container for the stats cards -->
    <div class="" 
    style="
     margin-bottom: 1rem;"
     >
        <!-- Grid layout for the cards using Bootstrap's grid system -->
        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-6 g-4">

            <!-- Card 1: Today's Policy -->
            <div class="col">
                <div class="bg-white shadow-sm stat-card h-100">
                    <h3 class="text-muted">Today's Policy</h3>
                    <p class="text-dark fw-bold mt-2">22</p>
                </div>
            </div>

            <!-- Card 2: This Month's Policy -->
            <div class="col">
                <div class="bg-white shadow-sm stat-card h-100">
                    <h3 class="text-muted">This Month's Policy</h3>
                    <p class="text-dark fw-bold mt-2">22</p>
                </div>
            </div>

            <!-- Card 3: This Year's Policy -->
            <div class="col">
                <div class="bg-white shadow-sm stat-card h-100">
                    <h3 class="text-muted">This Year's Policy</h3>
                    <p class="text-dark fw-bold mt-2">22</p>
                </div>
            </div>

            <!-- Card 4: This Year's Policy (Duplicate for layout) -->
            <div class="col">
                <div class="bg-white shadow-sm stat-card h-100">
                    <h3 class="text-muted">This Year's Policy</h3>
                    <p class="text-dark fw-bold mt-2">22</p>
                </div>
            </div>

            <!-- Card 5: Total Earning -->
            <div class="col">
                <div class="bg-white shadow-sm stat-card h-100">
                    <h3 class="text-muted">Total Earning</h3>
                    <p class="text-dark fw-bold mt-2">22</p>
                </div>
            </div>

            <!-- Card 6: This Months Earning -->
            <div class="col">
                <div class="bg-white shadow-sm stat-card h-100">
                    <h3 class="text-muted">This Months Earning</h3>
                    <p class="text-dark fw-bold mt-2">22</p>
                </div>
            </div>

        </div>
    </div>


 <!-- Filter inputs -->
 <div class="form-container">

        <h2 class="h3 mb-2">Filter Policies</h2>
        <p class="text-muted mb-4">Use the fields below to refine your search results.</p>
<!-- 
        <div class="note-box">
            <div class="note-content">
                <span class="note-text">NOTE : </span>Data loaded for date range 2024-06-20 to 2024-09-13
            </div>
        </div> -->


        <!-- 
          I've placed all your columns as direct children of the .filter-row.
          This makes it easier for flexbox to manage their alignment and spacing.
        -->
        <!-- <div class="filter-row"> -->
            
            
        <form class="filter-row" [formGroup]="filterForm" (ngSubmit)="applyFilters()">

            <!-- <mat-form-field appearance="outline" class="filter-input-col">
                  <mat-label>From Date</mat-label>
                  <input matInput [matDatepicker]="fromPicker" placeholder="Select start date" formControlName="fromDate">
                  <mat-datepicker-toggle matSuffix [for]="fromPicker"></mat-datepicker-toggle>
                  <mat-datepicker #fromPicker></mat-datepicker>
                </mat-form-field>
            <mat-form-field appearance="outline" class="filter-input-col">
                  <mat-label>To Date</mat-label>
                  <input matInput [matDatepicker]="toPicker" placeholder="Select end date" formControlName="toDate">
                  <mat-datepicker-toggle matSuffix [for]="toPicker" ></mat-datepicker-toggle>
                  <mat-datepicker #toPicker></mat-datepicker>
                </mat-form-field>

             <mat-form-field appearance="outline" class="filter-input-col">
                  <mat-label>Policy No.</mat-label>
                  <input matInput placeholder="Search..." formControlName="policyNo">
                  <button mat-icon-button matSuffix *ngIf="filterForm.get('policyNo')?.value" (click)="filterForm.get('policyNo')?.setValue('')">
                    <mat-icon>close</mat-icon>
                  </button>
                </mat-form-field>
            <mat-form-field appearance="outline" class="filter-input-col">
                  <mat-label>Chassis No.</mat-label>
                  <input matInput placeholder="Search..." formControlName="chassisNo">
                  <button mat-icon-button matSuffix *ngIf="filterForm.get('chassisNo')?.value" (click)="filterForm.get('chassisNo')?.setValue('')">
                    <mat-icon>close</mat-icon>
                  </button> -->
                <!-- </mat-form-field> -->
                
                
                <!-- <button type="submit" mat-stroked-button color="primary">
                    <mat-icon>search</mat-icon>
                    Search
                </button> -->

            <div class="filter-input-col">
                <label class="label" for="fromDate">From Date</label>
                <div class="input-group">
                    <input formControlName="fromDate" id="fromDate" name="dateRangeFilter" placeholder="Select Date..." class="input-text" type="text" onfocus="this.type='date'" onblur="if(!this.value)this.type='text'">
                </div>
            </div> 

            <div class="filter-input-col">
                <label class="label" for="toDate">To Date</label>
                <div class="input-group">
                    <input formControlName="toDate" id="toDate" name="dateRangeFilter" placeholder="Select Date..." class="input-text" type="text" onfocus="this.type='date'" onblur="if(!this.value)this.type='text'">
                </div>
            </div>

            <div class="filter-input-col">
                <label class="label" for="policyNo">Insurance Policy No.</label>
                <div class="input-group">
                    <input formControlName="policyNo" placeholder="Search..." id="policyNo" name="policyNo" type="text" class="input-text">
                </div>
            </div>

            <div class="filter-input-col">
                <label class="label" for="chassisNo">Chassis No.</label>
                <div class="input-group">
                    <input formControlName="chassisNo" placeholder="Search..." id="chassisNo" name="chassisNo" type="text" class="input-text">
                </div>
            </div>


            <div class="filter-action-col">
                <button style="margin-right: 0.5rem;" class="btn btn-outline-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                      <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                    </svg>
                    <span class="button-text"> Search</span>
                </button>

                <button class="btn btn-outline-secondary" type="button" (click)="resetFilters()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-counterclockwise" viewBox="0 0 16 16">
                      <path fill-rule="evenodd" d="M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z"/>
                      <path d="M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z"/>
                    </svg>
                    <span class="button-text"> Reset</span>
                </button>
            </div> 

            </form>

             <!-- <div class="note-box">
            <div class="note-content">
                <span class="note-text">NOTE : </span>Data loaded for date range 2024-06-20 to 2024-09-13
            </div>
            <div class="filter-actions">
                <button type="submit" mat-stroked-button color="primary">
                    <mat-icon>search</mat-icon>
                    Search
                </button>
                <button type="button" mat-button (click)="resetFilters()">
                    <mat-icon>refresh</mat-icon>
                    Reset
                </button>
            </div>
            
        </div> -->
            

        <!-- <div class="top-bar">
            
                    NOTE : Data loaded for date range 2024-06-20 to 2024-09-13
                <div class="top-bar-actions">
                    <button type="submit" mat-stroked-button color="primary">
                    <mat-icon>search</mat-icon>
                    Search
                </button>
                <button type="button" mat-button (click)="resetFilters()">
                    <mat-icon>refresh</mat-icon>
                    Reset
                </button>
                </div>
            </div>
        </div> -->
        
        
    </div>

<div class="policy-container">

    <!-- <div class="policiesHistory-header">
            <div class="header-buttons ">
        <button type="button" class="button button-export">
            <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 20 20" fill="none"
                class="button-icon">
                <g clip-path="url(#clip0_1935_4243)">
                    <path
                        d="M17.6468 5.01339L12.8432 0.209821C12.7093 0.0758929 12.5285 0 12.3388 0H2.85662C2.46153 0 2.14233 0.319196 2.14233 0.714286V19.2857C2.14233 19.6808 2.46153 20 2.85662 20H17.1423C17.5374 20 17.8566 19.6808 17.8566 19.2857V5.52009C17.8566 5.33036 17.7807 5.14732 17.6468 5.01339ZM16.2093 5.84821H12.0084V1.64732L16.2093 5.84821ZM16.2495 18.3929H3.74948V1.60714H10.4905V6.42857C10.4905 6.67721 10.5893 6.91567 10.7651 7.09148C10.941 7.2673 11.1794 7.36607 11.428 7.36607H16.2495V18.3929ZM10.0464 11.5201L8.66689 9.23438C8.61778 9.15402 8.53073 9.10491 8.43698 9.10491H7.57983C7.5285 9.10491 7.47939 9.1183 7.43698 9.14732C7.31198 9.22545 7.27403 9.39062 7.35439 9.51786L9.19144 12.4286L7.32983 15.3929C7.30454 15.4335 7.29057 15.4802 7.28936 15.5281C7.28816 15.5759 7.29976 15.6232 7.32298 15.6651C7.34619 15.707 7.38018 15.7419 7.42141 15.7663C7.46264 15.7906 7.50963 15.8035 7.55751 15.8036H8.3276C8.42135 15.8036 8.50617 15.7545 8.55528 15.6763L9.95483 13.4107L11.3455 15.6741C11.3946 15.7545 11.4816 15.8013 11.5731 15.8013H12.4102C12.4615 15.8013 12.5106 15.7857 12.5553 15.7589C12.6803 15.6786 12.716 15.5134 12.6356 15.3884L10.7606 12.4777L12.6647 9.52009C12.6904 9.47955 12.7049 9.43285 12.7065 9.38484C12.7081 9.33683 12.6968 9.28927 12.6738 9.24711C12.6507 9.20495 12.6168 9.16972 12.5756 9.14511C12.5343 9.12049 12.4872 9.10738 12.4392 9.10714H11.6423C11.5486 9.10714 11.4615 9.15625 11.4124 9.23661L10.0464 11.5201Z"
                        fill="white"></path>
                </g>
                <defs>
                    <clipPath id="clip0_1935_4243">
                        <rect width="20" height="20" fill="white"></rect>
                    </clipPath>
                </defs>
            </svg>
            Export
        </button>
        <button type="button" class="button button-reset">
            <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 20 20" fill="none"
                class="button-icon">
                <path
                    d="M17.5 10C17.5 5.85786 14.1421 2.5 10 2.5C8.07911 2.5 6.32689 3.22213 5 4.40973M4.16667 2.5V5C4.16667 5.46024 4.53976 5.83333 5 5.83333H7.5M2.5 10C2.5 14.1421 5.85786 17.5 10 17.5C11.9209 17.5 13.6731 16.7779 15 15.5903M15.8333 17.5V15C15.8333 14.5398 15.4602 14.1667 15 14.1667H12.5"
                    stroke="white" stroke-width="1.5" stroke-linecap="round"></path>
            </svg>
            Reset Filters
        </button>
    </div>
    </div> -->







    <!-- <div class="filter-row">
  <div class="filter-item">
    <label class="filter-label">Insurance Policy No.</label>
    <mat-form-field appearance="outline">
      <input class="custom-input" matInput placeholder="Search..." />
      <mat-icon matSuffix>search</mat-icon>
    </mat-form-field>
  </div>

  <div class="filter-item">
    <label class="filter-label">
      <span>Chassis No.</span>
      <mat-icon matTooltip="Chassis Number Search Info">info</mat-icon>
    </label>
    <mat-form-field appearance="outline">
      <input class="custom-input" matInput placeholder="Search..." />
      <mat-icon matSuffix>search</mat-icon>
    </mat-form-field>
  </div>

  <div class="filter-item">
    <label class="filter-label">Date Range</label>
    <mat-form-field appearance="outline">
      <input class="custom-input" matInput placeholder="Select Date..." />
      <mat-icon matSuffix>calendar_today</mat-icon>
    </mat-form-field>
  </div>
</div> -->



<!-- Table container for scrolling -->
    <div class="table-scroll-container">
    <!-- <table class="requests-table"> -->
    <!-- Angular Material Table -->
    <table mat-table [dataSource]="dataSource()" matSort class="requests-table">

            <ng-container matColumnDef="uid" sticky>
                <th mat-header-cell *matHeaderCellDef>UID</th>
                <td mat-cell *matCellDef="let row">
                    <span class="badge danger-badge">{{ row.uid }}</span>

                </td>
            </ng-container>

            <ng-container matColumnDef="status" sticky>
                <th mat-header-cell *matHeaderCellDef>Status</th>
                <td mat-cell *matCellDef="let row">
                    <span class="badge danger-badge">{{ row.status }}</span>
                </td>
            </ng-container>

            <ng-container matColumnDef="policyNo" >
                <th mat-header-cell *matHeaderCellDef>Insurance Policy No.</th>
                <td mat-cell *matCellDef="let row">
                    <span class="badge danger-badge">{{ row.policyNo }}</span>
                </td>
            </ng-container>

            <ng-container matColumnDef="date">
                <th mat-header-cell *matHeaderCellDef>Date</th>
                <td mat-cell *matCellDef="let row">{{ row.date }}</td>
            </ng-container>

            <ng-container matColumnDef="time">
                <th mat-header-cell *matHeaderCellDef>Time</th>
                <td mat-cell *matCellDef="let row">{{ row.time }}</td>
            </ng-container>

            <ng-container matColumnDef="insurer">
                <th mat-header-cell *matHeaderCellDef>Insurer</th>
                <td mat-cell *matCellDef="let row">{{ row.insurer }}</td>
            </ng-container>

            <ng-container matColumnDef="riskStartDate">
                <th mat-header-cell *matHeaderCellDef>Risk Start Date</th>
                <td mat-cell *matCellDef="let row">{{ row.riskStartDate }}</td>
            </ng-container>

            <ng-container matColumnDef="holderName">
                <th mat-header-cell *matHeaderCellDef>Policy Holder Name</th>
                <td mat-cell *matCellDef="let row">{{ row.holderName }}</td>
            </ng-container>

            <ng-container matColumnDef="engineNo">
                <th mat-header-cell *matHeaderCellDef>Engine Number</th>
                <td mat-cell *matCellDef="let row">{{ row.engineNo }}</td>
            </ng-container>

            <ng-container matColumnDef="chassisNo">
                <th mat-header-cell *matHeaderCellDef>Chassis Number</th>
                <td mat-cell *matCellDef="let row">{{ row.chassisNo }}</td>
            </ng-container>

            <ng-container matColumnDef="vehicle">
                <th mat-header-cell *matHeaderCellDef>Vehicle</th>
                <td mat-cell *matCellDef="let row">{{ row.vehicle }}</td>
            </ng-container>

            <ng-container matColumnDef="bodyType">
                <th mat-header-cell *matHeaderCellDef>Body Type</th>
                <td mat-cell *matCellDef="let row">{{ row.bodyType }}</td>
            </ng-container>

            <ng-container matColumnDef="policyType">
                <th mat-header-cell *matHeaderCellDef>Policy Type</th>
                <td mat-cell *matCellDef="let row">{{ row.policyType }}</td>
            </ng-container>

            <ng-container matColumnDef="newVehicle">
                <th mat-header-cell *matHeaderCellDef>New Vehicle</th>
                <td mat-cell *matCellDef="let row">
                    <span class="badge danger-badge">{{ row.newVehicle }}</span>
                </td>
            </ng-container>

            <ng-container matColumnDef="idv">
                <th mat-header-cell *matHeaderCellDef>IDV</th>
                <td mat-cell *matCellDef="let row">
                    <span class="badge danger-badge">{{ row.idv }}</span>
                </td>
            </ng-container>

            <ng-container matColumnDef="premium">
                <th mat-header-cell *matHeaderCellDef>Premium</th>
                <td mat-cell *matCellDef="let row">{{ row.premium }}</td>
            </ng-container>

            <ng-container matColumnDef="dealership">
                <th mat-header-cell *matHeaderCellDef>Dealership Name</th>
                <td mat-cell *matCellDef="let row">{{ row.dealership }}</td>
            </ng-container>

            <ng-container matColumnDef="view">
                <th mat-header-cell *matHeaderCellDef>View</th>
                <td mat-cell *matCellDef="let row">
                    <button mat-icon-button><mat-icon>visibility</mat-icon></button>
                    <!-- visibility -->
                </td>
            </ng-container>



            <!-- Define the header and row rows -->
            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

            <!-- Row to show when no data matches the filter -->
            <tr class="mat-row" *matNoDataRow>
                <td class="mat-cell" [attr.colspan]="displayedColumns.length">
                    No policies found matching your search criteria.
                </td>
            </tr>
        </table>
    </div>


    <div class="pagination-container">
        @if(paginator)
        {
        <span class="pagination-summary">
            {{ getCustomRangeLabel(paginator.pageIndex, paginator.pageSize, dataSource().data.length) }}
        </span>
        }
        <mat-paginator 
        [pageSizeOptions]="[10, 25, 50]" 
        showFirstLastButtons 
        aria-label="Select page of policies"
        style="background-color: white;">
        </mat-paginator>
    </div>
</div>
